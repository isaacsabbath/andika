{% extends "base.html" %}
{% block title %}{{ post.title }} — BlogFast{% endblock %}
{% block content %}
<article class="max-w-3xl mx-auto px-4 py-8">
  <header class="mb-6">
    <h1 class="text-3xl font-extrabold">{{ post.title }}</h1>
    <p class="text-xs text-gray-500 mt-1">{{ post.created_at|date:"M d, Y" }}</p>
  </header>
  {% if post.featured_image %}
  <img src="{{ post.featured_image.url }}" alt="{{ post.title }}" class="w-full rounded-lg mb-6" />
  {% endif %}
  <div class="prose prose-invert max-w-none">
    {{ post.content|safe }}
  </div>
  <div class="mt-8 flex items-center gap-4">
    <form method="post" action="{% url 'blog:like' post.pk %}">
      {% csrf_token %}
      <button class="px-4 py-2 bg-brand-yellow text-black rounded-md font-semibold hover:brightness-95 transition-all">Like ({{ post.likes.count }})</button>
    </form>
  </div>
  <section class="mt-10">
    <h2 class="text-xl font-bold mb-3">Comments ({{ post.comments.count }})</h2>
    <form method="post" action="{% url 'blog:comment' post.pk %}" class="space-y-3">
      {% csrf_token %}
      <input type="text" name="name" placeholder="Your name" class="w-full px-3 py-2 rounded-md bg-gray-800 border border-gray-700 focus:border-brand-yellow outline-none" />
      <textarea name="text" placeholder="Write a comment..." class="w-full px-3 py-2 rounded-md bg-gray-800 border border-gray-700 focus:border-brand-yellow outline-none" rows="3"></textarea>
      <button class="px-4 py-2 bg-brand-yellow text-black rounded-md font-semibold hover:brightness-95 transition-all">Comment</button>
    </form>
    <ul class="mt-6 space-y-4">
      {% for c in post.comments.all %}
      <li class="bg-gray-900 rounded-md p-4">
        <p class="text-sm text-gray-300">{{ c.text }}</p>
        <p class="text-xs text-gray-500 mt-2">— {{ c.name }} • {{ c.created_at|date:"M d, Y H:i" }}</p>
      </li>
      {% empty %}
      <li class="text-gray-400">Be the first to comment.</li>
      {% endfor %}
    </ul>
  </section>
</article>
{% endblock %}
